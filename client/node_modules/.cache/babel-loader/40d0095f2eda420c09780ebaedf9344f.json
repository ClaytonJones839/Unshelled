{"ast":null,"code":"var _jsxFileName = \"/Users/clay/Desktop/Unshelled/client/src/components/reviews/ReviewNew.js\";\nimport React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\"; // import gql from \"graphql-tag\";\n\nimport Queries from \"../../graphql/queries\";\nimport Mutations from \"../../graphql/mutations\";\nconst FETCH_REVIEWS = Queries.FETCH_REVIEWS;\nconst NEW_REVIEW = Mutations.NEW_REVIEW;\n\nclass ReviewNew extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      body: \"\",\n      rating: 0,\n      restaurantId: this.props.restaurantId,\n      message: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  update(type) {\n    return e => {\n      this.setState({\n        [type]: e.target.value\n      });\n    };\n  }\n\n  handleSubmit(e, newReview) {\n    e.preventDefault();\n    let body = this.state.body;\n    newReview({\n      variables: {\n        body: body,\n        rating: parseInt(this.state.rating),\n        restaurantId: this.state.restaurantId\n      }\n    }).then(data => {\n      this.setState({\n        message: \"New review created successfully\",\n        body: \"\"\n      });\n      setTimeout(() => document.location.reload(true), 1000);\n    });\n  }\n\n  updateCache(cache, {\n    data: {\n      newReview\n    }\n  }) {\n    let reviews;\n\n    try {\n      reviews = cache.readQuery({\n        query: FETCH_REVIEWS\n      });\n    } catch (err) {\n      return;\n    }\n\n    if (reviews) {\n      let reviewArray = reviews.reviews;\n      cache.writeQuery({\n        query: FETCH_REVIEWS,\n        data: {\n          reviews: reviewArray.concat(newReview)\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Mutation, {\n      mutation: NEW_REVIEW,\n      update: (cache, data) => this.updateCache(cache, data),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, (newReview, {\n      data\n    }) => React.createElement(\"div\", {\n      className: \"new-review-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"review-form-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"New Review\"), React.createElement(\"form\", {\n      onSubmit: e => this.handleSubmit(e, newReview),\n      className: \"inner-review-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      class: \"rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"legend\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Please rate:\"), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star5\",\n      name: \"rating\",\n      value: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star5\",\n      title: \"Rocks!\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"5 stars\"), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star4\",\n      name: \"rating\",\n      value: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star4\",\n      title: \"Pretty good\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"4 stars\"), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star3\",\n      name: \"rating\",\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star3\",\n      title: \"Meh\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"3 stars\"), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star2\",\n      name: \"rating\",\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star2\",\n      title: \"Kinda bad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"2 stars\"), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star1\",\n      name: \"rating\",\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star1\",\n      title: \"Sucks big time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"1 star\")), React.createElement(\"button\", {\n      className: \"create-review-btn\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Create Review\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, this.state.message)));\n  }\n\n}\n\nexport default ReviewNew;","map":{"version":3,"sources":["/Users/clay/Desktop/Unshelled/client/src/components/reviews/ReviewNew.js"],"names":["React","Component","Mutation","Queries","Mutations","FETCH_REVIEWS","NEW_REVIEW","ReviewNew","constructor","props","state","body","rating","restaurantId","message","handleSubmit","bind","update","type","e","setState","target","value","newReview","preventDefault","variables","parseInt","then","data","setTimeout","document","location","reload","updateCache","cache","reviews","readQuery","query","err","reviewArray","writeQuery","concat","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\n// import gql from \"graphql-tag\";\nimport Queries from \"../../graphql/queries\";\nimport Mutations from \"../../graphql/mutations\";\nconst { FETCH_REVIEWS } = Queries;\nconst { NEW_REVIEW } = Mutations;\n\nclass ReviewNew extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      body: \"\",\n      rating: 0,\n      restaurantId: this.props.restaurantId,\n      message: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  update(type) {\n    return e => {\n      this.setState({ [type]: e.target.value });\n    };\n  }\n\n  handleSubmit(e, newReview) {\n    e.preventDefault();\n    let body = this.state.body;\n\n    newReview({\n      variables: {\n        body: body,\n        rating: parseInt(this.state.rating),\n        restaurantId: this.state.restaurantId\n      }\n    }).then(data => {\n      this.setState({\n        message: `New review created successfully`,\n        body: \"\",\n      });\n      setTimeout(() => document.location.reload(true), 1000);\n    });\n  }\n\n  updateCache(\n    cache,\n    {\n      data: { newReview }\n    }\n  ) {\n    let reviews;\n    try {\n      reviews = cache.readQuery({ query: FETCH_REVIEWS });\n    } catch (err) {\n      return;\n    }\n\n    if (reviews) {\n      let reviewArray = reviews.reviews;\n      cache.writeQuery({\n        query: FETCH_REVIEWS,\n        data: { reviews: reviewArray.concat(newReview) }\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Mutation\n        mutation={NEW_REVIEW}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(newReview, { data }) => (\n          <div className=\"new-review-form\">\n            <div className=\"review-form-text\">New Review</div>\n            <form\n              onSubmit={e => this.handleSubmit(e, newReview)}\n              className=\"inner-review-form\"\n            >\n              <fieldset class=\"rating\">\n                <legend>Please rate:</legend>\n                <input \n                  type=\"radio\" \n                  id=\"star5\" \n                  name=\"rating\" \n                  value=\"5\" />\n                <label for=\"star5\" title=\"Rocks!\">\n                  5 stars</label>\n                <input type=\"radio\" id=\"star4\" name=\"rating\" value=\"4\" /><label for=\"star4\" title=\"Pretty good\">4 stars</label>\n                <input type=\"radio\" id=\"star3\" name=\"rating\" value=\"3\" /><label for=\"star3\" title=\"Meh\">3 stars</label>\n                <input type=\"radio\" id=\"star2\" name=\"rating\" value=\"2\" /><label for=\"star2\" title=\"Kinda bad\">2 stars</label>\n                <input type=\"radio\" id=\"star1\" name=\"rating\" value=\"1\" /><label for=\"star1\" title=\"Sucks big time\">1 star</label>\n              </fieldset>\n              {/* <input\n                id=\"radio-1\"\n                type=\"radio\"\n                hidden=\"true\"\n                className=\"review-form-input\"\n                onChange={this.update(\"rating\")}\n                value={1}\n              />\n              <label for=\"radio-1\">\n                <i className='fas fa-star rad-1'></i>\n              </label>\n              <input\n                id=\"radio-2\"\n                type=\"radio\"\n                hidden=\"true\"\n                className=\"review-form-input\"\n                onChange={this.update(\"rating\")}\n                value={2}\n              />\n              <label for=\"radio-2\">\n                <i className='fas fa-star rad-2'></i>\n              </label>\n              <input\n                id=\"radio-3\"\n                type=\"radio\"\n                hidden=\"true\"\n                className=\"review-form-input\"\n                onChange={this.update(\"rating\")}\n                value={3}\n              />\n              <label for=\"radio-3\">\n                <i className='fas fa-star rad-3'></i>\n              </label>\n              <input\n                id=\"radio-4\"\n                type=\"radio\"\n                hidden=\"true\"\n                className=\"review-form-input\"\n                onChange={this.update(\"rating\")}\n                value={4}\n              />\n              <label for=\"radio-4\">\n                <i className='fas fa-star rad-4'></i>\n              </label>\n              <input\n                id=\"radio-5\"\n                type=\"radio\"\n                hidden=\"true\"\n                className=\"review-form-input\"\n                onChange={this.update(\"rating\")}\n                value={5}\n              />\n              <label for=\"radio-5\">\n                <i className='fas fa-star rad-5'></i>\n              </label>\n              <textarea\n                className=\"review-form-textarea\"\n                value={this.state.description}\n                onChange={this.update(\"body\")}\n                placeholder=\"Review goes here (Optional)\"\n              /> */}\n              <button className=\"create-review-btn\" type=\"submit\" >\n                Create Review\n              </button>\n            </form>\n            <p>{this.state.message}</p>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default ReviewNew;\n"]},"metadata":{},"sourceType":"module"}