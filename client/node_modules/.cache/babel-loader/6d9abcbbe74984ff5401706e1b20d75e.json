{"ast":null,"code":"var _jsxFileName = \"/Users/clay/Desktop/Unshelled/client/src/components/tacos/TacoNew.js\";\nimport React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport TacoCSS from \"./Taco.css\";\nimport gql from \"graphql-tag\";\nimport Queries from \"../../graphql/queries\";\nimport Mutations from \"../../graphql/mutations\"; // import { FETCH_TACOS } from \"../../graphql/queries\";\n\nconst FETCH_TACOS = Queries.FETCH_TACOS;\nconst NEW_TACO = Mutations.NEW_TACO;\n\nclass TacoNew extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      style: \"\",\n      price: 0,\n      description: \"\",\n      photo: \"https://i.pinimg.com/474x/75/80/b0/7580b09940eed1450661b4856eac0c24.jpg\",\n      restaurantId: this.props.restaurantId,\n      message: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  update(type) {\n    return e => {\n      this.setState({\n        [type]: e.target.value\n      });\n    };\n  }\n\n  handleSubmit(e, newTaco) {\n    e.preventDefault();\n    let name = this.state.name;\n    newTaco({\n      variables: {\n        name: name,\n        style: this.state.style,\n        price: parseInt(this.state.price),\n        description: this.state.description,\n        photo: this.state.photo,\n        restaurantId: this.state.restaurantId\n      }\n    }).then(data => {\n      this.setState({\n        message: \"New taco \\\"\".concat(name, \"\\\" created successfully\"),\n        name: \"\",\n        style: \"\",\n        photo: \"https://i.pinimg.com/474x/75/80/b0/7580b09940eed1450661b4856eac0c24.jpg\",\n        price: 0,\n        description: \"\"\n      });\n    });\n  }\n\n  updateCache(cache, {\n    data: {\n      newTaco\n    }\n  }) {\n    let tacos;\n\n    try {\n      tacos = cache.readQuery({\n        query: FETCH_TACOS\n      });\n    } catch (err) {\n      return;\n    }\n\n    if (tacos) {\n      let tacoArray = tacos.tacos;\n      cache.writeQuery({\n        query: FETCH_TACOS,\n        data: {\n          tacos: tacoArray.concat(newTaco)\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Mutation, {\n      mutation: NEW_TACO,\n      update: (cache, data) => this.updateCache(cache, data),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, (newTaco, {\n      data\n    }) => React.createElement(\"div\", {\n      className: \"new-taco-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"taco-form-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"New Taco\"), React.createElement(\"form\", {\n      onSubmit: e => this.handleSubmit(e, newTaco),\n      className: \"taco-new-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onChange: this.update(\"name\"),\n      value: this.state.name,\n      placeholder: \"Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      onChange: this.update(\"style\"),\n      value: this.state.style,\n      placeholder: \"Style (Optional)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"number\",\n      onChange: this.update(\"price\"),\n      value: this.state.price,\n      placeholder: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.update(\"photo\"),\n      value: this.state.photo,\n      placeholder: \"photo url\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      value: this.state.description,\n      onChange: this.update(\"description\"),\n      placeholder: \"Description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Create Taco\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.state.message)));\n  }\n\n}\n\nexport default TacoNew;","map":{"version":3,"sources":["/Users/clay/Desktop/Unshelled/client/src/components/tacos/TacoNew.js"],"names":["React","Component","Mutation","TacoCSS","gql","Queries","Mutations","FETCH_TACOS","NEW_TACO","TacoNew","constructor","props","state","name","style","price","description","photo","restaurantId","message","handleSubmit","bind","update","type","e","setState","target","value","newTaco","preventDefault","variables","parseInt","then","data","updateCache","cache","tacos","readQuery","query","err","tacoArray","writeQuery","concat","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport TacoCSS from \"./Taco.css\";\nimport gql from \"graphql-tag\";\nimport Queries from \"../../graphql/queries\";\nimport Mutations from \"../../graphql/mutations\";\n// import { FETCH_TACOS } from \"../../graphql/queries\";\nconst { FETCH_TACOS } = Queries;\nconst { NEW_TACO } = Mutations;\n\nclass TacoNew extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      style: \"\",\n      price: 0,\n      description: \"\",\n      photo: \"https://i.pinimg.com/474x/75/80/b0/7580b09940eed1450661b4856eac0c24.jpg\",\n      restaurantId: this.props.restaurantId,\n      message: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  update(type) {\n    return e => {\n      this.setState({ [type]: e.target.value });\n    };\n  }\n\n  handleSubmit(e, newTaco) {\n    e.preventDefault();\n    let name = this.state.name;\n\n\n    newTaco({\n      variables: {\n        name: name,\n        style: this.state.style,\n        price: parseInt(this.state.price),\n        description: this.state.description,\n        photo: this.state.photo,\n        restaurantId: this.state.restaurantId\n      }\n    })\n      .then(data => {\n        this.setState({\n          message: `New taco \"${name}\" created successfully`,\n          name: \"\",\n          style: \"\",\n          photo: \"https://i.pinimg.com/474x/75/80/b0/7580b09940eed1450661b4856eac0c24.jpg\",\n          price: 0,\n          description: \"\"\n        });\n      });\n  }\n\n  updateCache(\n    cache,\n    {\n      data: { newTaco }\n    }\n  ) {\n    let tacos;\n    try {\n      tacos = cache.readQuery({ query: FETCH_TACOS });\n    } catch (err) {\n      return;\n    }\n\n    if (tacos) {\n      let tacoArray = tacos.tacos;\n\n      cache.writeQuery({\n        query: FETCH_TACOS,\n        data: { tacos: tacoArray.concat(newTaco) }\n      });\n    }\n  }\n\n\n  render() {\n    return (\n      <Mutation\n        mutation={NEW_TACO}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(newTaco, { data }) => (\n          <div className=\"new-taco-form\">\n            <div className=\"taco-form-text\">\n              New Taco\n            </div>\n            <form\n              onSubmit={e => this.handleSubmit(e, newTaco)}\n              className=\"taco-new-form\"\n            >\n              <input\n                onChange={this.update(\"name\")}\n                value={this.state.name}\n                placeholder=\"Name\"\n              />\n              <input\n                onChange={this.update(\"style\")}\n                value={this.state.style}\n                placeholder=\"Style (Optional)\"\n              />\n              <input\n                type=\"number\"\n                onChange={this.update(\"price\")}\n                value={this.state.price}\n                placeholder=\"0\"\n              />\n              <input\n                type=\"text\"\n                onChange={this.update(\"photo\")}\n                value={this.state.photo}\n                placeholder=\"photo url\"\n              />\n              <textarea\n                value={this.state.description}\n                onChange={this.update(\"description\")}\n                placeholder=\"Description\"\n              />\n              <button type=\"submit\">Create Taco</button>\n            </form>\n            <p>{this.state.message}</p>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n\n\n}\n\n\n\n\nexport default TacoNew;\n"]},"metadata":{},"sourceType":"module"}